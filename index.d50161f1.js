!function(){var t={postsContainer:document.querySelector(".posts-container"),form:document.querySelector("form"),del:document.querySelector(".delete")},n="http://localhost:3000/posts";function e(){fetch(n).then((function(t){return t.json()})).then((function(n){t.postsContainer.innerHTML="";var e="";n.forEach((function(t){var n=o(t);e+=n})),t.postsContainer.insertAdjacentHTML("beforeend",e)})).catch((function(t){console.error("Ошибка при получении постов:",t)}))}function o(t){return'<div class="container-card" data-id="'.concat(t.id,'">\n    <p>Title = ').concat(t.post.title,"</p>\n    <p>Body = ").concat(t.post.body,'</p>\n    <button class="delete">Удалить</button>\n    <button class="edit">Редактировать</button>\n    </div>')}function c(t){var o=document.querySelector(".modal"),c=document.querySelector('.modal input[name="title"]'),a=document.querySelector('.modal textarea[name="body"]'),i=document.querySelector(".modal button.save");c.value=t.post.title,a.value=t.post.body,i.onclick=function(){t.post.title=c.value,t.post.body=a.value,function(t){var e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:t.post})};return fetch("".concat(n,"/").concat(t.id),e)}(t).then((function(){e(r)}))},o.style.display="block"}function r(){document.querySelector(".modal").style.display="none"}function e(e){fetch(n).then((function(t){return t.json()})).then((function(n){t.postsContainer.innerHTML="";var c="";n.forEach((function(t){var n=o(t);c+=n})),t.postsContainer.insertAdjacentHTML("beforeend",c),e&&e()})).catch((function(t){console.error("Ошибка при получении постов:",t)}))}fetch(n).then((function(t){return t.json()})).then((function(n){var e="";n.forEach((function(t){var n=o(t);e+=n})),t.postsContainer.insertAdjacentHTML("beforeend",e)})).catch((function(t){console.error("Ошибка при получении постов:",t)})),t.postsContainer.addEventListener("click",(function(t){if(t.target.classList.contains("delete")){var e=t.target.closest(".container-card");(function(t){var e={method:"DELETE"};return fetch("".concat(n,"/").concat(t),e)})(e.dataset.id).then((function(){e.remove()}))}})),e(),t.form.addEventListener("submit",(function(o){o.preventDefault();var c,r,a=new FormData(t.form),i=a.get("name"),s=a.get("text");i&&s?(c={userId:1,title:i,body:s},r={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({post:c})},fetch("".concat(n),r).then((function(t){return t.json()}))).then((function(){e()})):alert("Пожалуйста, заполните все поля")})),t.postsContainer.addEventListener("click",(function(t){t.target.classList.contains("edit")&&function(t){return fetch("".concat(n,"/").concat(t)).then((function(t){return t.json()}))}(t.target.closest(".container-card").dataset.id).then((function(t){c(t)}))}))}();
//# sourceMappingURL=index.d50161f1.js.map
